<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Onboarding Wizard - Interactive Mockup (Accordion Categories)</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
      background: #f5f5f5;
      min-height: 100vh;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       PAGE HEADER (Gradient Bar)
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .page-header {
      background: linear-gradient(135deg, #005BAA 0%, #004A8F 100%);
      color: #ffffff;
      padding: 12px 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .page-header-left { display: flex; align-items: center; gap: 12px; }
    .page-header-logo {
      width: 40px; height: 40px;
      background: rgba(255,255,255,0.2);
      border-radius: 10px;
      display: flex; align-items: center; justify-content: center;
      font-size: 18px;
    }
    .page-header-title { font-size: 18px; font-weight: 600; }
    .page-header-subtitle { font-size: 11px; opacity: 0.85; }
    .page-header-btn {
      padding: 8px 16px;
      border-radius: 6px;
      background: rgba(255,255,255,0.15);
      border: 1px solid rgba(255,255,255,0.25);
      color: #fff;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .page-header-btn:hover { background: rgba(255,255,255,0.25); }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       PAGE BODY
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .page-body {
      padding: 24px;
      display: flex;
      flex-direction: column;
      min-height: calc(100vh - 64px);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       3-COLUMN WIZARD LAYOUT
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .wizard-layout {
      display: flex;
      flex: 1;
      background: #fff;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    /* LEFT SIDEBAR */
    .sidebar {
      width: 280px;
      background: #faf9f8;
      border-right: 1px solid #edebe9;
      display: flex;
      flex-direction: column;
      flex-shrink: 0;
    }
    .sidebar-header {
      padding: 20px;
      border-bottom: 1px solid #edebe9;
    }
    .sidebar-title { font-size: 16px; font-weight: 600; color: #1a1a1a; }
    .sidebar-subtitle { font-size: 12px; color: #605e5c; margin-top: 4px; }
    .steps-list { flex: 1; overflow-y: auto; padding: 12px; }
    .step-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.15s ease;
      margin-bottom: 4px;
    }
    .step-item:hover { background: #f3f2f1; }
    .step-item.active { background: #e6f0fa; }
    .step-item.completed { opacity: 0.7; }
    .step-number {
      width: 28px; height: 28px;
      border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-size: 12px; font-weight: 600;
      flex-shrink: 0;
    }
    .step-item.active .step-number { background: #005BAA; color: #fff; }
    .step-item.completed .step-number { background: #059669; color: #fff; }
    .step-item:not(.active):not(.completed) .step-number { background: #edebe9; color: #605e5c; }
    .step-label { font-size: 13px; font-weight: 500; }
    .step-item.active .step-label { color: #005BAA; font-weight: 600; }

    /* CENTER CONTENT */
    .main-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }
    .content-header {
      padding: 20px 24px;
      border-bottom: 1px solid #edebe9;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .content-title { font-size: 18px; font-weight: 600; color: #1a1a1a; }
    .content-subtitle { font-size: 13px; color: #605e5c; margin-top: 2px; }
    .progress-bar {
      width: 200px;
      height: 6px;
      background: #edebe9;
      border-radius: 3px;
      overflow: hidden;
    }
    .progress-fill {
      height: 100%;
      background: #005BAA;
      transition: width 0.3s ease;
    }
    .progress-text { font-size: 11px; color: #8a8886; margin-top: 4px; text-align: right; }
    .content-body {
      flex: 1;
      overflow-y: auto;
      padding: 24px;
    }
    .content-footer {
      padding: 16px 24px;
      border-top: 1px solid #edebe9;
      display: flex;
      justify-content: space-between;
      background: #faf9f8;
    }
    .btn {
      padding: 10px 20px;
      border-radius: 6px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.15s ease;
    }
    .btn-primary {
      background: linear-gradient(135deg, #005BAA 0%, #004A8Fcc 100%);
      border: none;
      color: #fff;
    }
    .btn-primary:hover { opacity: 0.9; }
    .btn-primary:disabled { opacity: 0.5; cursor: not-allowed; }
    .btn-secondary {
      background: #f3f2f1;
      border: 1px solid #edebe9;
      color: #323130;
    }
    .btn-secondary:hover { background: #e5e5e5; }

    /* RIGHT PANEL (Tips) */
    .tips-panel {
      width: 280px;
      background: #faf9f8;
      border-left: 1px solid #edebe9;
      display: flex;
      flex-direction: column;
      flex-shrink: 0;
    }
    .tips-header {
      padding: 16px 20px;
      border-bottom: 1px solid #edebe9;
      font-weight: 600;
      font-size: 14px;
      color: #323130;
    }
    .tips-content { flex: 1; overflow-y: auto; padding: 16px; }
    .tip-card {
      background: #fff;
      border: 1px solid #edebe9;
      border-radius: 8px;
      padding: 12px;
      margin-bottom: 12px;
    }
    .tip-card-header { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; }
    .tip-icon {
      width: 24px; height: 24px;
      background: #e6f0fa;
      color: #005BAA;
      border-radius: 6px;
      display: flex; align-items: center; justify-content: center;
      font-size: 12px;
    }
    .tip-title { font-weight: 600; font-size: 12px; }
    .tip-text { font-size: 12px; color: #605e5c; line-height: 1.5; }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       FORM ELEMENTS
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .form-section {
      background: #fff;
      border: 1px solid #edebe9;
      border-radius: 10px;
      margin-bottom: 16px;
      overflow: hidden;
    }
    .form-section-header {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 14px 16px;
      background: #faf9f8;
      border-bottom: 1px solid #edebe9;
    }
    .form-section-icon {
      width: 32px; height: 32px;
      border-radius: 8px;
      display: flex; align-items: center; justify-content: center;
      font-size: 14px;
    }
    .form-section-title { font-size: 14px; font-weight: 600; }
    .form-section-body { padding: 16px; }
    .form-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
    }
    .form-group { display: flex; flex-direction: column; gap: 6px; }
    .form-group.full-width { grid-column: span 2; }
    .form-label { font-size: 13px; font-weight: 500; color: #323130; }
    .form-input, .form-select {
      padding: 8px 12px;
      border: 1px solid #c8c6c4;
      border-radius: 4px;
      font-size: 13px;
      transition: border-color 0.15s ease;
    }
    .form-input:focus, .form-select:focus {
      outline: none;
      border-color: #005BAA;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       ACCORDION CATEGORIES (Variation 1)
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .accordion-list { display: flex; flex-direction: column; gap: 8px; }
    .accordion-category {
      border: 1px solid #edebe9;
      border-radius: 8px;
      overflow: hidden;
      background: #fff;
    }
    .accordion-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 16px;
      background: #faf9f8;
      cursor: pointer;
      transition: background 0.15s ease;
      user-select: none;
    }
    .accordion-header:hover { background: #f3f2f1; }
    .accordion-header-left { display: flex; align-items: center; gap: 12px; }
    .accordion-icon {
      width: 36px; height: 36px;
      border-radius: 8px;
      display: flex; align-items: center; justify-content: center;
      font-size: 16px;
    }
    .accordion-icon.hr { background: #e0f2fe; color: #0369a1; }
    .accordion-icon.it { background: #fef3c7; color: #d97706; }
    .accordion-icon.compliance { background: #fce7f3; color: #be185d; }
    .accordion-icon.facilities { background: #d1fae5; color: #059669; }
    .accordion-icon.equipment { background: #ede9fe; color: #7c3aed; }
    .accordion-icon.training { background: #fef9c3; color: #ca8a04; }
    .accordion-title-group { display: flex; flex-direction: column; }
    .accordion-title { font-weight: 600; font-size: 14px; color: #1a1a1a; }
    .accordion-subtitle { font-size: 11px; color: #8a8886; margin-top: 2px; }
    .accordion-badge {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .accordion-count {
      background: #e5e5e5;
      color: #605e5c;
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 600;
    }
    .accordion-count.complete { background: #d1fae5; color: #059669; }
    .accordion-chevron {
      font-size: 12px;
      color: #8a8886;
      transition: transform 0.2s ease;
      width: 20px;
      text-align: center;
    }
    .accordion-category.open .accordion-chevron { transform: rotate(180deg); }
    .accordion-content {
      display: none;
      padding: 0 16px 16px 64px;
      animation: slideDown 0.2s ease;
    }
    .accordion-category.open .accordion-content { display: block; }
    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .accordion-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 0;
      border-bottom: 1px solid #f3f2f1;
      font-size: 13px;
    }
    .accordion-item:last-child { border-bottom: none; }
    .accordion-checkbox {
      width: 20px; height: 20px;
      border: 2px solid #c8c6c4;
      border-radius: 4px;
      display: flex; align-items: center; justify-content: center;
      font-size: 12px;
      flex-shrink: 0;
      cursor: pointer;
      transition: all 0.15s ease;
    }
    .accordion-checkbox:hover { border-color: #005BAA; }
    .accordion-checkbox.checked {
      background: #005BAA;
      border-color: #005BAA;
      color: #fff;
    }
    .accordion-item-text { flex: 1; }
    .accordion-item-meta { font-size: 11px; color: #8a8886; }
    .accordion-item-actions { display: flex; gap: 8px; }
    .accordion-item-btn {
      padding: 4px 10px;
      border: 1px solid #edebe9;
      border-radius: 4px;
      background: #fff;
      font-size: 11px;
      cursor: pointer;
    }
    .accordion-item-btn:hover { background: #f3f2f1; }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SUCCESS SCREEN
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .success-screen {
      display: none;
      flex-direction: column;
      align-items: center;
      padding: 40px;
      text-align: center;
    }
    .success-screen.visible { display: flex; }
    .success-header { display: flex; align-items: center; gap: 20px; margin-bottom: 32px; }
    .success-icon {
      width: 80px; height: 80px;
      border-radius: 50%;
      background: linear-gradient(135deg, #005BAA 0%, #004A8Fcc 100%);
      display: flex; align-items: center; justify-content: center;
      color: #fff;
      font-size: 36px;
    }
    .success-title { font-size: 26px; font-weight: 600; text-align: left; }
    .success-subtitle { font-size: 14px; color: #605e5c; text-align: left; margin-top: 4px; }
    .success-stats {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 12px;
      width: 100%;
      max-width: 600px;
      margin-bottom: 32px;
    }
    .success-stat {
      background: #fff;
      border: 1px solid #edebe9;
      border-radius: 8px;
      padding: 16px;
      text-align: center;
    }
    .success-stat-value { font-size: 24px; font-weight: 700; color: #005BAA; }
    .success-stat-label { font-size: 11px; color: #8a8886; margin-top: 4px; }
    .success-panels {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
      width: 100%;
      max-width: 1000px;
      margin-bottom: 32px;
    }
    .success-panel {
      background: #fff;
      border: 1px solid #edebe9;
      border-radius: 10px;
      padding: 16px;
      text-align: left;
    }
    .success-panel-header {
      display: flex;
      align-items: center;
      gap: 10px;
      padding-bottom: 12px;
      margin-bottom: 12px;
      border-bottom: 1px solid #f3f2f1;
    }
    .success-panel-icon {
      width: 32px; height: 32px;
      background: rgba(0,91,170,0.1);
      color: #005BAA;
      border-radius: 8px;
      display: flex; align-items: center; justify-content: center;
      font-size: 14px;
    }
    .success-panel-title { font-weight: 600; font-size: 14px; }
    .success-panel-count { margin-left: auto; font-size: 12px; color: #8a8886; }
    .success-panel-list { max-height: 160px; overflow-y: auto; }
    .success-panel-item {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 6px 0;
      font-size: 13px;
      border-bottom: 1px solid #f9f9f9;
    }
    .success-panel-item:last-child { border-bottom: none; }
    .success-panel-item-icon {
      width: 18px; height: 18px;
      border-radius: 50%;
      background: #059669;
      color: #fff;
      display: flex; align-items: center; justify-content: center;
      font-size: 10px;
    }
    .success-actions { display: flex; gap: 12px; }

    /* Candidate Search */
    .candidate-list { display: flex; flex-direction: column; gap: 8px; margin-top: 16px; }
    .candidate-card {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 16px;
      border: 2px solid #edebe9;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.15s ease;
    }
    .candidate-card:hover { border-color: #c8c6c4; background: #faf9f8; }
    .candidate-card.selected { border-color: #005BAA; background: #e6f0fa; }
    .candidate-avatar {
      width: 48px; height: 48px;
      background: #e6f0fa;
      color: #005BAA;
      border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-weight: 600;
      font-size: 16px;
    }
    .candidate-info { flex: 1; }
    .candidate-name { font-weight: 600; font-size: 14px; }
    .candidate-meta { font-size: 12px; color: #605e5c; margin-top: 2px; }
    .candidate-badge {
      padding: 4px 10px;
      background: #d1fae5;
      color: #059669;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 600;
    }

    /* Hide wizard content when showing success */
    .wizard-layout.hidden { display: none; }
  </style>
</head>
<body>
  <!-- PAGE HEADER -->
  <div class="page-header">
    <div class="page-header-left">
      <div class="page-header-logo">ğŸ‘¤</div>
      <div>
        <div class="page-header-title">New Joiner Onboarding</div>
        <div class="page-header-subtitle">DWx Recruitment Manager</div>
      </div>
    </div>
    <button class="page-header-btn" onclick="resetWizard()">
      âœ• Exit Wizard
    </button>
  </div>

  <!-- PAGE BODY -->
  <div class="page-body">
    <!-- WIZARD LAYOUT -->
    <div class="wizard-layout" id="wizardLayout">
      <!-- LEFT SIDEBAR -->
      <div class="sidebar">
        <div class="sidebar-header">
          <div class="sidebar-title">Onboarding</div>
          <div class="sidebar-subtitle">New Employee</div>
        </div>
        <div class="steps-list" id="stepsList">
          <!-- Steps generated by JS -->
        </div>
      </div>

      <!-- MAIN CONTENT -->
      <div class="main-content">
        <div class="content-header">
          <div>
            <div class="content-title" id="stepTitle">Select Candidate</div>
            <div class="content-subtitle" id="stepSubtitle">Choose a candidate to begin onboarding</div>
          </div>
          <div>
            <div class="progress-bar">
              <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            <div class="progress-text" id="progressText">Step 1 of 7</div>
          </div>
        </div>

        <div class="content-body" id="contentBody">
          <!-- Step content rendered by JS -->
        </div>

        <div class="content-footer">
          <button class="btn btn-secondary" id="backBtn" onclick="prevStep()" style="visibility: hidden;">â† Back</button>
          <button class="btn btn-primary" id="nextBtn" onclick="nextStep()">Next â†’</button>
        </div>
      </div>

      <!-- RIGHT PANEL (Tips) -->
      <div class="tips-panel">
        <div class="tips-header">ğŸ’¡ Tips & Checklist</div>
        <div class="tips-content" id="tipsContent">
          <!-- Tips rendered by JS -->
        </div>
      </div>
    </div>

    <!-- SUCCESS SCREEN -->
    <div class="success-screen" id="successScreen">
      <div class="success-header">
        <div class="success-icon">âœ“</div>
        <div>
          <div class="success-title">Onboarding Created Successfully!</div>
          <div class="success-subtitle" id="successSubtitle">John Smith â€¢ Software Engineer â€¢ Engineering â€¢ Starts Jan 15, 2026</div>
        </div>
      </div>

      <div class="success-stats" id="successStats">
        <!-- Stats rendered by JS -->
      </div>

      <div class="success-panels" id="successPanels">
        <!-- Panels rendered by JS -->
      </div>

      <div class="success-actions">
        <button class="btn btn-primary" onclick="alert('Would navigate to Onboarding Tracker')">View Onboarding Tracker</button>
        <button class="btn btn-secondary" onclick="resetWizard()">Start Another</button>
      </div>
    </div>
  </div>

  <script>
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // WIZARD STATE
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    const state = {
      currentStep: 0,
      selectedCandidate: null,
      employeeDetails: {
        startDate: '2026-01-15',
        department: 'Engineering',
        manager: 'Jane Wilson',
        location: 'London Office'
      },
      documents: [
        { id: 1, name: 'Employment Contract', category: 'HR', required: true, received: false },
        { id: 2, name: 'Tax Forms (P45/P46)', category: 'HR', required: true, received: false },
        { id: 3, name: 'NDA Agreement', category: 'Legal', required: true, received: false },
        { id: 4, name: 'Emergency Contact Form', category: 'HR', required: true, received: false },
        { id: 5, name: 'Direct Deposit Form', category: 'Finance', required: false, received: false },
        { id: 6, name: 'Benefits Enrollment', category: 'HR', required: false, received: false },
        { id: 7, name: 'Photo ID Copy', category: 'Compliance', required: true, received: false },
        { id: 8, name: 'Right to Work Documents', category: 'Compliance', required: true, received: false },
      ],
      systems: [
        { id: 1, name: 'Microsoft 365', category: 'Core', role: 'User', requested: true },
        { id: 2, name: 'SharePoint', category: 'Core', role: 'Contributor', requested: true },
        { id: 3, name: 'Azure DevOps', category: 'Development', role: 'Developer', requested: true },
        { id: 4, name: 'GitHub', category: 'Development', role: 'Member', requested: true },
        { id: 5, name: 'Jira', category: 'Development', role: 'Developer', requested: false },
        { id: 6, name: 'Salesforce', category: 'Business', role: 'User', requested: false },
        { id: 7, name: 'Power BI', category: 'Analytics', role: 'Viewer', requested: false },
        { id: 8, name: 'ServiceNow', category: 'IT Support', role: 'User', requested: false },
      ],
      equipment: [
        { id: 1, name: 'MacBook Pro 16"', category: 'Hardware', quantity: 1, requested: true },
        { id: 2, name: 'Dell 27" Monitor', category: 'Hardware', quantity: 2, requested: true },
        { id: 3, name: 'Wireless Keyboard & Mouse', category: 'Hardware', quantity: 1, requested: true },
        { id: 4, name: 'Laptop Stand', category: 'Accessories', quantity: 1, requested: false },
        { id: 5, name: 'Headset', category: 'Accessories', quantity: 1, requested: true },
        { id: 6, name: 'Webcam', category: 'Accessories', quantity: 1, requested: false },
        { id: 7, name: 'Desk Chair (Ergonomic)', category: 'Furniture', quantity: 1, requested: false },
        { id: 8, name: 'Standing Desk Converter', category: 'Furniture', quantity: 1, requested: false },
      ],
      training: [
        { id: 1, name: 'Security Awareness', category: 'Compliance', mandatory: true, scheduled: false },
        { id: 2, name: 'Data Privacy (GDPR)', category: 'Compliance', mandatory: true, scheduled: false },
        { id: 3, name: 'Code of Conduct', category: 'Compliance', mandatory: true, scheduled: false },
        { id: 4, name: 'Company Orientation', category: 'Onboarding', mandatory: true, scheduled: false },
        { id: 5, name: 'IT Systems Training', category: 'Technical', mandatory: false, scheduled: false },
        { id: 6, name: 'Product Overview', category: 'Business', mandatory: false, scheduled: false },
        { id: 7, name: 'Team Processes', category: 'Team', mandatory: false, scheduled: false },
        { id: 8, name: 'Health & Safety', category: 'Compliance', mandatory: true, scheduled: false },
      ]
    };

    const STEPS = [
      { title: 'Select Candidate', subtitle: 'Choose a candidate to onboard', icon: 'ğŸ‘¤' },
      { title: 'Employee Details', subtitle: 'Confirm employment information', icon: 'ğŸ“‹' },
      { title: 'Documents', subtitle: 'Required paperwork and forms', icon: 'ğŸ“„' },
      { title: 'System Access', subtitle: 'IT systems and permissions', icon: 'ğŸ”' },
      { title: 'Equipment', subtitle: 'Hardware and accessories', icon: 'ğŸ’»' },
      { title: 'Training', subtitle: 'Mandatory and optional courses', icon: 'ğŸ“š' },
      { title: 'Review & Submit', subtitle: 'Confirm all selections', icon: 'âœ“' }
    ];

    const CANDIDATES = [
      { id: 1, name: 'John Smith', position: 'Software Engineer', email: 'john.smith@example.com', status: 'Offer Accepted' },
      { id: 2, name: 'Sarah Johnson', position: 'Product Manager', email: 'sarah.j@example.com', status: 'Offer Accepted' },
      { id: 3, name: 'Michael Chen', position: 'UX Designer', email: 'm.chen@example.com', status: 'Offer Accepted' },
    ];

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // RENDER FUNCTIONS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function renderSteps() {
      const container = document.getElementById('stepsList');
      container.innerHTML = STEPS.map((step, i) => `
        <div class="step-item ${i === state.currentStep ? 'active' : ''} ${i < state.currentStep ? 'completed' : ''}"
             onclick="goToStep(${i})">
          <div class="step-number">${i < state.currentStep ? 'âœ“' : i + 1}</div>
          <div>
            <div class="step-label">${step.title}</div>
          </div>
        </div>
      `).join('');
    }

    function renderProgress() {
      const progress = (state.currentStep / (STEPS.length - 1)) * 100;
      document.getElementById('progressFill').style.width = `${progress}%`;
      document.getElementById('progressText').textContent = `Step ${state.currentStep + 1} of ${STEPS.length}`;
      document.getElementById('stepTitle').textContent = STEPS[state.currentStep].title;
      document.getElementById('stepSubtitle').textContent = STEPS[state.currentStep].subtitle;

      // Update buttons
      document.getElementById('backBtn').style.visibility = state.currentStep === 0 ? 'hidden' : 'visible';
      const nextBtn = document.getElementById('nextBtn');
      if (state.currentStep === STEPS.length - 1) {
        nextBtn.textContent = 'Start Onboarding';
        nextBtn.onclick = submitWizard;
      } else {
        nextBtn.textContent = 'Next â†’';
        nextBtn.onclick = nextStep;
      }
    }

    function renderTips() {
      const tips = getTipsForStep(state.currentStep);
      document.getElementById('tipsContent').innerHTML = tips.map(tip => `
        <div class="tip-card">
          <div class="tip-card-header">
            <div class="tip-icon">${tip.icon}</div>
            <div class="tip-title">${tip.title}</div>
          </div>
          <div class="tip-text">${tip.text}</div>
        </div>
      `).join('');
    }

    function getTipsForStep(step) {
      const allTips = {
        0: [
          { icon: 'ğŸ’¡', title: 'Quick Tip', text: 'Select a candidate who has accepted their offer and is ready to start the onboarding process.' },
          { icon: 'ğŸ“‹', title: 'Checklist', text: 'Ensure all interview stages are complete before onboarding.' }
        ],
        1: [
          { icon: 'ğŸ“…', title: 'Start Date', text: 'Allow at least 2 weeks lead time for IT setup and equipment procurement.' },
          { icon: 'ğŸ‘”', title: 'Manager', text: 'The assigned manager will receive automatic notifications about onboarding progress.' }
        ],
        2: [
          { icon: 'âš ï¸', title: 'Required Docs', text: 'Legally required documents must be received before the start date.' },
          { icon: 'ğŸ“¤', title: 'Upload Later', text: 'You can mark documents as received later from the tracker.' }
        ],
        3: [
          { icon: 'ğŸ”', title: 'IT Approval', text: 'Some systems may require additional manager approval for access.' },
          { icon: 'â±ï¸', title: 'Lead Time', text: 'System provisioning typically takes 1-2 business days.' }
        ],
        4: [
          { icon: 'ğŸ“¦', title: 'Delivery', text: 'Equipment orders are processed by IT and delivered to the employee location.' },
          { icon: 'ğŸ’°', title: 'Budget', text: 'Equipment requests over Â£2,000 require additional approval.' }
        ],
        5: [
          { icon: 'ğŸ“š', title: 'Mandatory', text: 'Compliance training must be completed within 30 days of start date.' },
          { icon: 'ğŸ—“ï¸', title: 'Schedule', text: 'Training sessions can be scheduled through the Learning Management System.' }
        ],
        6: [
          { icon: 'âœ…', title: 'Review', text: 'Double-check all selections before submitting. You can edit from the tracker later.' },
          { icon: 'ğŸ“§', title: 'Notifications', text: 'The employee and manager will receive confirmation emails upon submission.' }
        ]
      };
      return allTips[step] || [];
    }

    function renderStepContent() {
      const container = document.getElementById('contentBody');

      switch (state.currentStep) {
        case 0: renderCandidateSelection(container); break;
        case 1: renderEmployeeDetails(container); break;
        case 2: renderDocuments(container); break;
        case 3: renderSystems(container); break;
        case 4: renderEquipment(container); break;
        case 5: renderTraining(container); break;
        case 6: renderReview(container); break;
      }
    }

    function renderCandidateSelection(container) {
      container.innerHTML = `
        <div class="form-section">
          <div class="form-section-header">
            <div class="form-section-icon" style="background: #e6f0fa; color: #005BAA;">ğŸ”</div>
            <div class="form-section-title">Search Candidates</div>
          </div>
          <div class="form-section-body">
            <input type="text" class="form-input" placeholder="Search by name, email, or position..." style="width: 100%;">
            <div class="candidate-list">
              ${CANDIDATES.map(c => `
                <div class="candidate-card ${state.selectedCandidate?.id === c.id ? 'selected' : ''}"
                     onclick="selectCandidate(${c.id})">
                  <div class="candidate-avatar">${c.name.split(' ').map(n => n[0]).join('')}</div>
                  <div class="candidate-info">
                    <div class="candidate-name">${c.name}</div>
                    <div class="candidate-meta">${c.position} â€¢ ${c.email}</div>
                  </div>
                  <div class="candidate-badge">${c.status}</div>
                </div>
              `).join('')}
            </div>
          </div>
        </div>
      `;
    }

    function renderEmployeeDetails(container) {
      container.innerHTML = `
        <div class="form-section">
          <div class="form-section-header">
            <div class="form-section-icon" style="background: #e6f0fa; color: #005BAA;">ğŸ‘¤</div>
            <div class="form-section-title">Employee Information</div>
          </div>
          <div class="form-section-body">
            <div class="form-grid">
              <div class="form-group">
                <label class="form-label">Full Name</label>
                <input type="text" class="form-input" value="${state.selectedCandidate?.name || ''}" readonly style="background: #f3f2f1;">
              </div>
              <div class="form-group">
                <label class="form-label">Position</label>
                <input type="text" class="form-input" value="${state.selectedCandidate?.position || ''}" readonly style="background: #f3f2f1;">
              </div>
              <div class="form-group">
                <label class="form-label">Start Date *</label>
                <input type="date" class="form-input" value="${state.employeeDetails.startDate}"
                       onchange="state.employeeDetails.startDate = this.value">
              </div>
              <div class="form-group">
                <label class="form-label">Department *</label>
                <select class="form-select" onchange="state.employeeDetails.department = this.value">
                  <option ${state.employeeDetails.department === 'Engineering' ? 'selected' : ''}>Engineering</option>
                  <option ${state.employeeDetails.department === 'Product' ? 'selected' : ''}>Product</option>
                  <option ${state.employeeDetails.department === 'Design' ? 'selected' : ''}>Design</option>
                  <option ${state.employeeDetails.department === 'Marketing' ? 'selected' : ''}>Marketing</option>
                  <option ${state.employeeDetails.department === 'Sales' ? 'selected' : ''}>Sales</option>
                  <option ${state.employeeDetails.department === 'HR' ? 'selected' : ''}>HR</option>
                  <option ${state.employeeDetails.department === 'Finance' ? 'selected' : ''}>Finance</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label">Manager *</label>
                <select class="form-select" onchange="state.employeeDetails.manager = this.value">
                  <option ${state.employeeDetails.manager === 'Jane Wilson' ? 'selected' : ''}>Jane Wilson</option>
                  <option ${state.employeeDetails.manager === 'David Brown' ? 'selected' : ''}>David Brown</option>
                  <option ${state.employeeDetails.manager === 'Emily Taylor' ? 'selected' : ''}>Emily Taylor</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label">Work Location</label>
                <select class="form-select" onchange="state.employeeDetails.location = this.value">
                  <option ${state.employeeDetails.location === 'London Office' ? 'selected' : ''}>London Office</option>
                  <option ${state.employeeDetails.location === 'Manchester Office' ? 'selected' : ''}>Manchester Office</option>
                  <option ${state.employeeDetails.location === 'Remote' ? 'selected' : ''}>Remote</option>
                  <option ${state.employeeDetails.location === 'Hybrid' ? 'selected' : ''}>Hybrid</option>
                </select>
              </div>
            </div>
          </div>
        </div>
      `;
    }

    function renderDocuments(container) {
      const categories = groupByCategory(state.documents, 'category');
      container.innerHTML = `
        <div class="accordion-list">
          ${Object.entries(categories).map(([cat, items]) => {
            const received = items.filter(i => i.received).length;
            const required = items.filter(i => i.required).length;
            return renderAccordionCategory(cat, items, 'documents', {
              icon: cat === 'HR' ? 'hr' : cat === 'Legal' ? 'compliance' : cat === 'Finance' ? 'it' : 'facilities',
              subtitle: `${received}/${items.length} received â€¢ ${required} required`,
              countClass: received === items.length ? 'complete' : ''
            });
          }).join('')}
        </div>
      `;
    }

    function renderSystems(container) {
      const categories = groupByCategory(state.systems, 'category');
      container.innerHTML = `
        <div class="accordion-list">
          ${Object.entries(categories).map(([cat, items]) => {
            const requested = items.filter(i => i.requested).length;
            return renderAccordionCategory(cat, items, 'systems', {
              icon: cat === 'Core' ? 'hr' : cat === 'Development' ? 'it' : cat === 'Business' ? 'facilities' : 'compliance',
              subtitle: `${requested}/${items.length} requested`,
              countClass: requested === items.length ? 'complete' : ''
            });
          }).join('')}
        </div>
      `;
    }

    function renderEquipment(container) {
      const categories = groupByCategory(state.equipment, 'category');
      container.innerHTML = `
        <div class="accordion-list">
          ${Object.entries(categories).map(([cat, items]) => {
            const requested = items.filter(i => i.requested).length;
            return renderAccordionCategory(cat, items, 'equipment', {
              icon: cat === 'Hardware' ? 'equipment' : cat === 'Accessories' ? 'it' : 'facilities',
              subtitle: `${requested}/${items.length} requested`,
              countClass: requested === items.length ? 'complete' : ''
            });
          }).join('')}
        </div>
      `;
    }

    function renderTraining(container) {
      const categories = groupByCategory(state.training, 'category');
      container.innerHTML = `
        <div class="accordion-list">
          ${Object.entries(categories).map(([cat, items]) => {
            const mandatory = items.filter(i => i.mandatory).length;
            const scheduled = items.filter(i => i.scheduled).length;
            return renderAccordionCategory(cat, items, 'training', {
              icon: cat === 'Compliance' ? 'compliance' : cat === 'Onboarding' ? 'hr' : cat === 'Technical' ? 'it' : 'training',
              subtitle: `${scheduled}/${items.length} scheduled â€¢ ${mandatory} mandatory`,
              countClass: scheduled === items.length ? 'complete' : ''
            });
          }).join('')}
        </div>
      `;
    }

    function renderAccordionCategory(category, items, type, options) {
      const iconClass = options.icon || 'hr';
      const id = `accordion-${type}-${category.replace(/\s+/g, '-').toLowerCase()}`;

      let itemsHtml = '';
      if (type === 'documents') {
        itemsHtml = items.map(item => `
          <div class="accordion-item">
            <div class="accordion-checkbox ${item.received ? 'checked' : ''}"
                 onclick="toggleDocument(${item.id})">
              ${item.received ? 'âœ“' : ''}
            </div>
            <div class="accordion-item-text">
              ${item.name}
              ${item.required ? '<span style="color: #dc2626; font-size: 11px;"> *Required</span>' : ''}
            </div>
            <div class="accordion-item-actions">
              <button class="accordion-item-btn" onclick="event.stopPropagation()">Upload</button>
            </div>
          </div>
        `).join('');
      } else if (type === 'systems') {
        itemsHtml = items.map(item => `
          <div class="accordion-item">
            <div class="accordion-checkbox ${item.requested ? 'checked' : ''}"
                 onclick="toggleSystem(${item.id})">
              ${item.requested ? 'âœ“' : ''}
            </div>
            <div class="accordion-item-text">
              ${item.name}
              <div class="accordion-item-meta">Role: ${item.role}</div>
            </div>
          </div>
        `).join('');
      } else if (type === 'equipment') {
        itemsHtml = items.map(item => `
          <div class="accordion-item">
            <div class="accordion-checkbox ${item.requested ? 'checked' : ''}"
                 onclick="toggleEquipment(${item.id})">
              ${item.requested ? 'âœ“' : ''}
            </div>
            <div class="accordion-item-text">
              ${item.name}
              ${item.quantity > 1 ? `<span class="accordion-item-meta">Qty: ${item.quantity}</span>` : ''}
            </div>
          </div>
        `).join('');
      } else if (type === 'training') {
        itemsHtml = items.map(item => `
          <div class="accordion-item">
            <div class="accordion-checkbox ${item.scheduled ? 'checked' : ''}"
                 onclick="toggleTraining(${item.id})">
              ${item.scheduled ? 'âœ“' : ''}
            </div>
            <div class="accordion-item-text">
              ${item.name}
              ${item.mandatory ? '<span style="color: #dc2626; font-size: 11px;"> *Mandatory</span>' : ''}
            </div>
            <div class="accordion-item-actions">
              <button class="accordion-item-btn" onclick="event.stopPropagation()">Schedule</button>
            </div>
          </div>
        `).join('');
      }

      return `
        <div class="accordion-category" id="${id}">
          <div class="accordion-header" onclick="toggleAccordion('${id}')">
            <div class="accordion-header-left">
              <div class="accordion-icon ${iconClass}">${getIconForCategory(category)}</div>
              <div class="accordion-title-group">
                <div class="accordion-title">${category}</div>
                <div class="accordion-subtitle">${options.subtitle}</div>
              </div>
            </div>
            <div class="accordion-badge">
              <span class="accordion-count ${options.countClass || ''}">${items.length} items</span>
              <span class="accordion-chevron">â–¼</span>
            </div>
          </div>
          <div class="accordion-content">
            ${itemsHtml}
          </div>
        </div>
      `;
    }

    function renderReview(container) {
      const docs = state.documents.filter(d => d.required);
      const systems = state.systems.filter(s => s.requested);
      const equip = state.equipment.filter(e => e.requested);
      const train = state.training.filter(t => t.mandatory);

      container.innerHTML = `
        <div class="form-section">
          <div class="form-section-header">
            <div class="form-section-icon" style="background: #e6f0fa; color: #005BAA;">ğŸ‘¤</div>
            <div class="form-section-title">Employee Details</div>
          </div>
          <div class="form-section-body">
            <div class="form-grid">
              <div><strong>Name:</strong> ${state.selectedCandidate?.name || 'Not selected'}</div>
              <div><strong>Position:</strong> ${state.selectedCandidate?.position || 'N/A'}</div>
              <div><strong>Department:</strong> ${state.employeeDetails.department}</div>
              <div><strong>Start Date:</strong> ${state.employeeDetails.startDate}</div>
              <div><strong>Manager:</strong> ${state.employeeDetails.manager}</div>
              <div><strong>Location:</strong> ${state.employeeDetails.location}</div>
            </div>
          </div>
        </div>

        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;">
          <div class="form-section">
            <div class="form-section-header">
              <div class="form-section-icon" style="background: #e0f2fe; color: #0369a1;">ğŸ“„</div>
              <div class="form-section-title">Documents (${docs.filter(d => d.received).length}/${docs.length} received)</div>
            </div>
            <div class="form-section-body" style="max-height: 150px; overflow-y: auto;">
              ${docs.map(d => `
                <div style="padding: 6px 0; display: flex; align-items: center; gap: 8px; font-size: 13px;">
                  <span style="color: ${d.received ? '#059669' : '#8a8886'};">${d.received ? 'âœ“' : 'â—‹'}</span>
                  ${d.name}
                </div>
              `).join('')}
            </div>
          </div>

          <div class="form-section">
            <div class="form-section-header">
              <div class="form-section-icon" style="background: #fef3c7; color: #d97706;">ğŸ”</div>
              <div class="form-section-title">System Access (${systems.length} systems)</div>
            </div>
            <div class="form-section-body" style="max-height: 150px; overflow-y: auto;">
              ${systems.map(s => `
                <div style="padding: 6px 0; font-size: 13px;">
                  ${s.name} <span style="color: #8a8886;">(${s.role})</span>
                </div>
              `).join('')}
            </div>
          </div>

          <div class="form-section">
            <div class="form-section-header">
              <div class="form-section-icon" style="background: #ede9fe; color: #7c3aed;">ğŸ’»</div>
              <div class="form-section-title">Equipment (${equip.length} items)</div>
            </div>
            <div class="form-section-body" style="max-height: 150px; overflow-y: auto;">
              ${equip.map(e => `
                <div style="padding: 6px 0; font-size: 13px;">
                  ${e.name}${e.quantity > 1 ? ` Ã—${e.quantity}` : ''}
                </div>
              `).join('')}
            </div>
          </div>

          <div class="form-section">
            <div class="form-section-header">
              <div class="form-section-icon" style="background: #fce7f3; color: #be185d;">ğŸ“š</div>
              <div class="form-section-title">Training (${train.length} mandatory)</div>
            </div>
            <div class="form-section-body" style="max-height: 150px; overflow-y: auto;">
              ${train.map(t => `
                <div style="padding: 6px 0; display: flex; align-items: center; gap: 8px; font-size: 13px;">
                  <span style="color: ${t.scheduled ? '#059669' : '#d97706'};">${t.scheduled ? 'âœ“' : 'â±'}</span>
                  ${t.name}
                </div>
              `).join('')}
            </div>
          </div>
        </div>
      `;
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // UTILITY FUNCTIONS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function groupByCategory(items, key) {
      return items.reduce((acc, item) => {
        const cat = item[key];
        if (!acc[cat]) acc[cat] = [];
        acc[cat].push(item);
        return acc;
      }, {});
    }

    function getIconForCategory(category) {
      const icons = {
        'HR': 'ğŸ‘¤', 'Legal': 'âš–ï¸', 'Finance': 'ğŸ’°', 'Compliance': 'ğŸ“‹',
        'Core': 'â­', 'Development': 'ğŸ’»', 'Business': 'ğŸ“Š', 'Analytics': 'ğŸ“ˆ', 'IT Support': 'ğŸ› ï¸',
        'Hardware': 'ğŸ–¥ï¸', 'Accessories': 'ğŸ§', 'Furniture': 'ğŸª‘',
        'Onboarding': 'ğŸ¯', 'Technical': 'âš™ï¸', 'Team': 'ğŸ‘¥'
      };
      return icons[category] || 'ğŸ“';
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // EVENT HANDLERS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function selectCandidate(id) {
      state.selectedCandidate = CANDIDATES.find(c => c.id === id);
      renderStepContent();
    }

    function toggleAccordion(id) {
      const el = document.getElementById(id);
      el.classList.toggle('open');
    }

    function toggleDocument(id) {
      const doc = state.documents.find(d => d.id === id);
      if (doc) doc.received = !doc.received;
      renderStepContent();
    }

    function toggleSystem(id) {
      const sys = state.systems.find(s => s.id === id);
      if (sys) sys.requested = !sys.requested;
      renderStepContent();
    }

    function toggleEquipment(id) {
      const eq = state.equipment.find(e => e.id === id);
      if (eq) eq.requested = !eq.requested;
      renderStepContent();
    }

    function toggleTraining(id) {
      const tr = state.training.find(t => t.id === id);
      if (tr) tr.scheduled = !tr.scheduled;
      renderStepContent();
    }

    function goToStep(step) {
      if (step <= state.currentStep) {
        state.currentStep = step;
        render();
      }
    }

    function nextStep() {
      if (state.currentStep === 0 && !state.selectedCandidate) {
        alert('Please select a candidate to continue.');
        return;
      }
      if (state.currentStep < STEPS.length - 1) {
        state.currentStep++;
        render();
      }
    }

    function prevStep() {
      if (state.currentStep > 0) {
        state.currentStep--;
        render();
      }
    }

    function submitWizard() {
      // Show success screen
      document.getElementById('wizardLayout').classList.add('hidden');
      document.getElementById('successScreen').classList.add('visible');
      renderSuccessScreen();
    }

    function renderSuccessScreen() {
      const docs = state.documents.filter(d => d.required);
      const systems = state.systems.filter(s => s.requested);
      const equip = state.equipment.filter(e => e.requested);
      const train = state.training.filter(t => t.mandatory);

      document.getElementById('successSubtitle').textContent =
        `${state.selectedCandidate?.name} â€¢ ${state.selectedCandidate?.position} â€¢ ${state.employeeDetails.department} â€¢ Starts ${state.employeeDetails.startDate}`;

      document.getElementById('successStats').innerHTML = `
        <div class="success-stat">
          <div class="success-stat-value">${docs.length}</div>
          <div class="success-stat-label">Documents</div>
        </div>
        <div class="success-stat">
          <div class="success-stat-value">${systems.length}</div>
          <div class="success-stat-label">Systems</div>
        </div>
        <div class="success-stat">
          <div class="success-stat-value">${equip.length}</div>
          <div class="success-stat-label">Equipment</div>
        </div>
        <div class="success-stat">
          <div class="success-stat-value">${train.length}</div>
          <div class="success-stat-label">Training</div>
        </div>
      `;

      document.getElementById('successPanels').innerHTML = `
        <div class="success-panel">
          <div class="success-panel-header">
            <div class="success-panel-icon">ğŸ“„</div>
            <span class="success-panel-title">Documents</span>
            <span class="success-panel-count">${docs.length}</span>
          </div>
          <div class="success-panel-list">
            ${docs.map(d => `
              <div class="success-panel-item">
                <div class="success-panel-item-icon">âœ“</div>
                <span>${d.name}</span>
              </div>
            `).join('')}
          </div>
        </div>

        <div class="success-panel">
          <div class="success-panel-header">
            <div class="success-panel-icon">ğŸ”</div>
            <span class="success-panel-title">System Access</span>
            <span class="success-panel-count">${systems.length}</span>
          </div>
          <div class="success-panel-list">
            ${systems.map(s => `
              <div class="success-panel-item">
                <div class="success-panel-item-icon">âœ“</div>
                <span>${s.name} (${s.role})</span>
              </div>
            `).join('')}
          </div>
        </div>

        <div class="success-panel">
          <div class="success-panel-header">
            <div class="success-panel-icon">ğŸ’»</div>
            <span class="success-panel-title">Equipment</span>
            <span class="success-panel-count">${equip.length}</span>
          </div>
          <div class="success-panel-list">
            ${equip.map(e => `
              <div class="success-panel-item">
                <div class="success-panel-item-icon">âœ“</div>
                <span>${e.name}${e.quantity > 1 ? ` Ã—${e.quantity}` : ''}</span>
              </div>
            `).join('')}
          </div>
        </div>

        <div class="success-panel">
          <div class="success-panel-header">
            <div class="success-panel-icon">ğŸ“š</div>
            <span class="success-panel-title">Training</span>
            <span class="success-panel-count">${train.length}</span>
          </div>
          <div class="success-panel-list">
            ${train.map(t => `
              <div class="success-panel-item">
                <div class="success-panel-item-icon">âœ“</div>
                <span>${t.name}</span>
              </div>
            `).join('')}
          </div>
        </div>

        <div class="success-panel">
          <div class="success-panel-header">
            <div class="success-panel-icon">ğŸ‘¤</div>
            <span class="success-panel-title">Employee Details</span>
            <span class="success-panel-count">6</span>
          </div>
          <div class="success-panel-list">
            <div class="success-panel-item">
              <div class="success-panel-item-icon">âœ“</div>
              <span>Department: ${state.employeeDetails.department}</span>
            </div>
            <div class="success-panel-item">
              <div class="success-panel-item-icon">âœ“</div>
              <span>Manager: ${state.employeeDetails.manager}</span>
            </div>
            <div class="success-panel-item">
              <div class="success-panel-item-icon">âœ“</div>
              <span>Location: ${state.employeeDetails.location}</span>
            </div>
            <div class="success-panel-item">
              <div class="success-panel-item-icon">âœ“</div>
              <span>Start: ${state.employeeDetails.startDate}</span>
            </div>
          </div>
        </div>

        <div class="success-panel">
          <div class="success-panel-header">
            <div class="success-panel-icon">ğŸ“…</div>
            <span class="success-panel-title">Next Steps</span>
            <span class="success-panel-count">4</span>
          </div>
          <div class="success-panel-list">
            <div class="success-panel-item">
              <div class="success-panel-item-icon" style="background: #d97706;">!</div>
              <span>IT to provision systems</span>
            </div>
            <div class="success-panel-item">
              <div class="success-panel-item-icon" style="background: #d97706;">!</div>
              <span>HR to collect documents</span>
            </div>
            <div class="success-panel-item">
              <div class="success-panel-item-icon" style="background: #d97706;">!</div>
              <span>Facilities to setup desk</span>
            </div>
            <div class="success-panel-item">
              <div class="success-panel-item-icon" style="background: #d97706;">!</div>
              <span>Manager to plan first week</span>
            </div>
          </div>
        </div>
      `;
    }

    function resetWizard() {
      state.currentStep = 0;
      state.selectedCandidate = null;
      state.documents.forEach(d => d.received = false);
      state.systems.forEach(s => s.requested = ['Microsoft 365', 'SharePoint', 'Azure DevOps', 'GitHub'].includes(s.name));
      state.equipment.forEach(e => e.requested = ['MacBook Pro 16"', 'Dell 27" Monitor', 'Wireless Keyboard & Mouse', 'Headset'].includes(e.name));
      state.training.forEach(t => t.scheduled = false);

      document.getElementById('wizardLayout').classList.remove('hidden');
      document.getElementById('successScreen').classList.remove('visible');
      render();
    }

    function render() {
      renderSteps();
      renderProgress();
      renderTips();
      renderStepContent();

      // Open first accordion by default on accordion steps
      if ([2, 3, 4, 5].includes(state.currentStep)) {
        setTimeout(() => {
          const firstAccordion = document.querySelector('.accordion-category');
          if (firstAccordion) firstAccordion.classList.add('open');
        }, 50);
      }
    }

    // Initialize
    render();
  </script>
</body>
</html>
